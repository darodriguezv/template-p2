### Variables
@baseUrl = http://localhost:3000/api
@tokenId = {{createToken.response.body.id}}

### 1. Crear Token
# @name createToken
POST {{baseUrl}}/token
Content-Type: application/json

{
  "token": "mitoken123"
}

### 2. Crear Personaje - Homero Simpson
POST {{baseUrl}}/character
Content-Type: application/json
x-token-id: {{tokenId}}

{
  "name": "Homero Simpson",
  "salary": 4500,
  "employee": true
}

### 3. Crear Personaje - Moe Szyslak
POST {{baseUrl}}/character
Content-Type: application/json
x-token-id: {{tokenId}}

{
  "name": "Moe Szyslak",
  "salary": 7500,
  "employee": false
}

### 4. Crear Personaje - Krusty
POST {{baseUrl}}/character
Content-Type: application/json
x-token-id: {{tokenId}}

{
  "name": "Krusty",
  "salary": 12000,
  "employee": false
}

### 5. Crear Location - Casa Homer
POST {{baseUrl}}/location
Content-Type: application/json
x-token-id: {{tokenId}}

{
  "name": "Casa Homer",
  "type": "Casa",
  "cost": 350000,
  "ownerId": 1
}

### 6. Crear Location - Taberna Moe
POST {{baseUrl}}/location
Content-Type: application/json
x-token-id: {{tokenId}}

{
  "name": "Taberna",
  "type": "Entretenimiento",
  "cost": 1200000,
  "ownerId": 2
}

### 7. Agregar Favorito - Moe marca Casa Homer como favorita
PATCH {{baseUrl}}/character/2/favorites/1
x-token-id: {{tokenId}}

### 8. Agregar Favorito - Homero marca Taberna como favorita
PATCH {{baseUrl}}/character/1/favorites/2
x-token-id: {{tokenId}}

### 9. Calcular Impuestos - Homero (empleado con casa de $350,000)
# Resultado esperado: 350000 * (1 + 0.08) = 378000
GET {{baseUrl}}/character/1/taxes
x-token-id: {{tokenId}}

### 10. Calcular Impuestos - Moe (no empleado con taberna de $1,200,000)
# Resultado esperado: 1200000 * (1 + 0.03) = 1236000
GET {{baseUrl}}/character/2/taxes
x-token-id: {{tokenId}}

### 11. Calcular Impuestos - Krusty (sin propiedad)
# Resultado esperado: { "taxDebt": 0 }
GET {{baseUrl}}/character/3/taxes
x-token-id: {{tokenId}}

### 12. Ver todas las locaciones con sus visitantes favoritos
GET {{baseUrl}}/location
x-token-id: {{tokenId}}

### 13. Validar Token
GET {{baseUrl}}/token/{{tokenId}}

### 14. Reducir peticiones del token manualmente
PATCH {{baseUrl}}/token/reduce/{{tokenId}}
